<div class="card text-center shadow">
  <div class="class-header">
    <h5 class="modal-title text-subtitle-color" id="modalTitleProduct">
      Editar Registro
    </h5>
    <button
      type="button"
      class="btn-close"
      aria-label="Cerrar"
      (click)="closeModal()"
    ></button>
  </div>
  <div class="card-body" [formGroup]="updateFormProduct">
    <!-- Primera fila -->
    <div class="row g-2">
      <div class="col">
        <!-- Nombre -->
        <div class="form-floating mb-4">
          <input
            type="text"
            class="form-control shadow"
            id="prod_name"
            formControlName="prod_name"
            placeholder="Nombre del Producto"
            [class.is-invalid]="
              updateFormProduct.get('prod_name')?.touched &&
              updateFormProduct.get('prod_name')?.invalid
            "
            required
            autocomplete="off"
            [value]="updateFormProduct.get('prod_name')?.value"
          />
          <label for="prod_name" class="fw-semibold">
            Nombre del Producto <span class="text-danger">*</span>
          </label>
          <div class="invalid-feedback">
            <span
              *ngIf="updateFormProduct.get('prod_name')?.hasError('required')"
            >
              El nombre es obligatorio.
            </span>
            <span
              *ngIf="updateFormProduct.get('prod_name')?.hasError('pattern')"
            >
              No se permiten caracteres especiales o números.
            </span>
          </div>
        </div>
      </div>
      <div class="col">
        <!-- Detalle -->
        <div class="form-floating mb-4">
          <input
            type="text"
            class="form-control shadow"
            id="prod_details"
            formControlName="prod_details"
            placeholder="Detalle del Producto"
            [class.is-invalid]="
              updateFormProduct.get('prod_details')?.touched &&
              updateFormProduct.get('prod_details')?.invalid
            "
            required
            autocomplete="off"
            [value]="updateFormProduct.get('prod_details')?.value"
          />
          <label for="prod_details" class="fw-semibold">
            Detalle del producto <span class="text-danger">*</span>
          </label>
          <div class="invalid-feedback">
            <span
              *ngIf="
                updateFormProduct.get('prod_details')?.hasError('required')
              "
            >
              El detalle es obligatorio.
            </span>
            <span
              *ngIf="updateFormProduct.get('prod_details')?.hasError('pattern')"
            >
              No se permiten caracteres especiales o números.
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Segunda fila -->
    <div class="row g-2">
      <div class="col">
        <!-- Precio -->
        <div class="form-floating mb-4">
          <input
            type="number"
            class="form-control shadow"
            id="prod_price"
            formControlName="prod_price"
            placeholder="Precio"
            [class.is-invalid]="
              updateFormProduct.get('prod_price')?.touched &&
              updateFormProduct.get('prod_price')?.invalid
            "
            required
            autocomplete="off"
            [value]="updateFormProduct.get('prod_price')?.value"
          />
          <label for="prod_price" class="fw-semibold">
            Precio <span class="text-danger">*</span>
          </label>
          <div class="invalid-feedback">
            <span
              *ngIf="updateFormProduct.get('prod_price')?.hasError('required')"
            >
              El precio es obligatorio.
            </span>
          </div>
        </div>
      </div>
      <div class="col">
        <!-- Cantidad -->
        <div class="form-floating mb-4">
          <input
            type="number"
            class="form-control shadow"
            id="prod_stock"
            formControlName="prod_stock"
            placeholder="Cantidad"
            [class.is-invalid]="
              updateFormProduct.get('prod_stock')?.touched &&
              updateFormProduct.get('prod_stock')?.invalid
            "
            required
            autocomplete="off"
            [value]="updateFormProduct.get('prod_stock')?.value"
          />
          <label for="prod_stock" class="fw-semibold">
            Cantidad <span class="text-danger">*</span>
          </label>
          <div class="invalid-feedback">
            <span
              *ngIf="updateFormProduct.get('prod_stock')?.hasError('required')"
            >
              La cantidad es obligatoria.
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Tercera fila -->
    <div class="row g-2">
      <div class="col">
        <!-- Categoría -->
        <div class="form-floating mb-4">
          <select
            formControlName="catName"
            id="catName"
            class="form-select shadow"
            required
          >
            <option value="" disabled selected>
              {{ this.data.catName || "Seleccione una opcion" }}
            </option>
            <option
              *ngFor="let categoria of allCategoria"
              [value]="categoria.cat_id"
            >
              {{ categoria.cat_name }}
            </option>
          </select>
          <label for="catName" class="fw-semibold">
            Categorías <span class="text-danger">*</span>
          </label>
        </div>
      </div>
      <div class="col">
        <!-- Estado -->
        <div class="form-floating mb-4">
          <select
            formControlName="estName"
            id="estName"
            class="form-select shadow"
            required
          >
            <option value="" disabled selected>
              {{ this.data.estName || "Seleccione una opcion" }}
            </option>
            <option *ngFor="let state of allEstado" [value]="state.est_id">
              {{ state.est_name }}
            </option>
          </select>
          <label for="estName" class="fw-semibold">
            Estado <span class="text-danger">*</span>
          </label>
        </div>
      </div>
    </div>

    <!-- Botones -->
    <div class="text-center">
      <button type="button" class="btn btn-danger mx-2" (click)="closeModal()">
        Cerrar
      </button>
      <button
        type="submit"
        class="btn btn-success mx-2"
        [disabled]="!updateFormProduct.valid"
        (click)="updateProducto()"
      >
        Guardar
      </button>
    </div>
  </div>
</div>

<div class="card-footer">
  <span class="fst-italic">
    Todos los campos con <span class="text-danger">(*)</span> son obligatorios.
  </span>
</div>
